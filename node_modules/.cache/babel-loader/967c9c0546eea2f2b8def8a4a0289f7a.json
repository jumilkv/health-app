{"ast":null,"code":"var _jsxFileName = \"/home/jumil/Documents/Jumil/Health App/health-app/src/Admin/HealthTeam.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableSortLabel from '@material-ui/core/TableSortLabel';\nimport TableRow from '@material-ui/core/TableRow';\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\nimport { Link } from 'react-router-dom';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport EditIcon from '@material-ui/icons/Edit';\nimport CloseIcon from '@material-ui/icons/Close';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { withRouter } from 'react-router';\nimport Cookie from \"js-cookie\";\nimport BranchModal from './Modal';\nimport Fab from '@material-ui/core/Fab';\nimport AddIcon from '@material-ui/icons/Add';\nimport PrintIcon from '@material-ui/icons/Print';\nimport IconButton from '@material-ui/core/IconButton';\nimport { parseAsync } from 'json2csv';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport CustomizedSnackbars from './snack';\nimport Modal from 'react-awesome-modal';\nimport AppConstants from '../../Utils/AppConstants';\nimport Style from './Style/HealthTeam';\nimport { Item } from 'semantic-ui-react';\n\nconst moment = require('moment');\n\nconst token = Cookie.get('token');\nconst theme = createMuiTheme({\n  typography: {\n    fontSize: 25\n  }\n});\n\nfunction Branches(props) {\n  const [rows, setRows] = React.useState([]);\n  const classes = Style();\n  const [url, setUrl] = useState(\"\");\n  const [totalCount, setTotalCount] = useState({\n    status: false,\n    message: ''\n  });\n  const [order, setOrder] = useState('asc');\n  const [orderField, setOrderField] = useState('');\n  const [stageLoading, setStageLoading] = useState(true);\n  const [modalShow, setModalShow] = React.useState(false);\n  const [modalData, setModalData] = React.useState({});\n  const [modalName, setModalName] = React.useState('');\n  const [success, setSuccess] = useState({\n    status: false,\n    message: ''\n  });\n  const [hide, setHide] = useState({\n    print: false\n  });\n  const [orderBy, setOrderBy] = React.useState('');\n  const columns = [{\n    id: 'branch_name',\n    label: AppConstants.BRANCH,\n    minWidth: 170\n  }, {\n    id: 'emp_count',\n    label: AppConstants.EMPLOYEES_COUNT,\n    align: 'left'\n  }, {\n    id: 'state_name',\n    label: AppConstants.STATE,\n    align: 'left'\n  }, {\n    id: 'created_on',\n    label: AppConstants.CREATED_ON,\n    align: 'left'\n  }];\n\n  const handleRequestSort = async (event, property, id) => {\n    setOrder(order === 'desc' ? 'asc' : 'desc');\n    setOrderField(id);\n    setOrderBy(property.label);\n    await fetch(AppConstants.BACK_END_URL_DOMAIN + AppConstants.BRANCHES + '/' + AppConstants.SORT + '/' + id + '/' + order, {\n      method: 'GET',\n      headers: {\n        'Authorization': `Bearer ${token}`\n      }\n    }).then(res => res.json()).then(data => {\n      setRows(data);\n    });\n  };\n\n  const handleHide = () => {\n    setHide({\n      print: true\n    });\n  };\n\n  const createSortHandler = (property, id) => event => {\n    handleRequestSort(event, property, id);\n  };\n\n  const createdOn = createdDate => {\n    const date = new Date(createdDate).toDateString();\n    const time = new Date(createdDate).toLocaleTimeString();\n    var momentObj = moment(time, [\"h:mm:ss a\"]);\n    return date + ' ' + momentObj.format(\"hh:mm:ss a\");\n  };\n\n  const addOrUpdate = (type, data) => event => {\n    setModalData({});\n\n    if (type === 'edit') {\n      setModalShow(true);\n      setModalData(data);\n      setModalName('Edit ');\n    } else {\n      setModalShow(true);\n      setModalData({});\n      setModalName('Add ');\n    }\n  };\n\n  function downloadText(myData) {\n    const fields = ['branch_name', 'emp_count', 'state_name', 'created_on'];\n    const opts = {\n      fields\n    };\n    myData.filter(item => {\n      item.created_on = moment(item.created_on).format(\"ddd D MMM YYYY, h:mm:ss a\");\n    });\n    parseAsync(myData, opts).then(csv => {\n      var blob = new Blob([csv], {\n        type: 'text/csv;charset=utf-8;'\n      });\n      var url = URL.createObjectURL(blob);\n      setUrl(url);\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  const closeModal = async (status, message) => {\n    setModalShow(false);\n    setSuccess({\n      status: false,\n      message: ''\n    });\n    setSuccess({\n      status: status,\n      message: message\n    });\n\n    if (orderField !== '') {\n      await fetch(AppConstants.BACK_END_URL_DOMAIN + AppConstants.BRANCHES + '/' + AppConstants.SORT + '/' + orderField + '/' + (order === 'asc' ? 'desc' : 'asc'), {\n        method: 'GET',\n        headers: {\n          'Authorization': `Bearer ${Cookie.get('token')}`\n        }\n      }).then(res => res.json()).then(data => {\n        setRows(data);\n      });\n    } else {\n      await fetch(AppConstants.BACK_END_URL_DOMAIN + AppConstants.BRANCHES, {\n        method: 'get',\n        headers: {\n          'Authorization': `Bearer ${Cookie.get('token')}`\n        }\n      }).then(res => res.json()).then(data => {\n        setRows(data);\n        downloadText(data);\n      });\n    }\n  };\n\n  const printMe = () => {\n    if (hide.print == true) {\n      window.frames[\"print_frame\"].document.body.innerHTML = document.getElementsByClassName(classes.root)[0].innerHTML;\n      window.frames[\"print_frame\"].window.print();\n      setHide({\n        print: false\n      });\n    }\n  };\n\n  useEffect(() => {\n    async function fetchData() {\n      await fetch(AppConstants.BACK_END_URL_DOMAIN + AppConstants.BRANCHES, {\n        method: 'get',\n        headers: {\n          'Authorization': `Bearer ${Cookie.get('token')}`\n        }\n      }).then(res => res.json()).then(async data => {\n        setRows(data);\n        downloadText(data);\n        setStageLoading(false);\n      });\n    }\n\n    fetchData();\n  }, {});\n  useEffect(() => {\n    return () => {\n      console.log(\"cleaned up\");\n    };\n  }, []);\n  useEffect(() => {\n    printMe(hide.print);\n  }, [hide]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(ThemeProvider, {\n    theme: theme,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 11\n    }\n  }, !stageLoading ? /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 14\n    }\n  }, /*#__PURE__*/React.createElement(Paper, {\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.tableWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    stickyHeader: true,\n    \"aria-label\": \"sticky table\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(TableHead, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(TableRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 33\n    }\n  }, columns.map((column, index) => /*#__PURE__*/React.createElement(TableCell, {\n    className: classes.tableHead,\n    key: column.id,\n    align: column.align,\n    style: {\n      minWidth: column.minWidth\n    },\n    sortDirection: orderBy === column.label ? order : false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 41\n    }\n  }, column.id == 'branch_name' || column.id == 'created_on' || column.id == 'state_name' || column.id == 'emp_count' ? /*#__PURE__*/React.createElement(TableSortLabel, {\n    direction: order,\n    onClick: createSortHandler(columns[index], column.id),\n    hideSortIcon: hide.print,\n    active: orderBy === column.label && !hide.print,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 47\n    }\n  }, column.label) : column.label)), !hide.print ? /*#__PURE__*/React.createElement(TableCell, {\n    className: classes.tableHead,\n    align: \"left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 50\n    }\n  }, AppConstants.ACTION) : '')), /*#__PURE__*/React.createElement(TableBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 29\n    }\n  }, rows.map(ro => {\n    return /*#__PURE__*/React.createElement(TableRow, {\n      hover: true,\n      tabIndex: -1,\n      className: classes.rowData,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 37\n      }\n    }, columns.map(column => {\n      const value = ro[column.id];\n      return column.id == 'created_on' ? /*#__PURE__*/React.createElement(TableCell, {\n        className: classes.rowData,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 45\n        }\n      }, createdOn(value)) : /*#__PURE__*/React.createElement(TableCell, {\n        key: column.id,\n        align: column.align,\n        className: classes.rowData,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 44\n        }\n      }, value);\n    }), !hide.print ? /*#__PURE__*/React.createElement(TableCell, {\n      className: classes.tableRowData,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 43\n      }\n    }, /*#__PURE__*/React.createElement(Tooltip, {\n      title: `Edit branch (` + ro.branch_name + `)`,\n      placement: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(EditIcon, {\n      className: classes.editIcon,\n      onClick: addOrUpdate('edit', ro),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 49\n      }\n    }))) : '');\n  }))), /*#__PURE__*/React.createElement(\"iframe\", {\n    name: \"print_frame\",\n    width: \"0\",\n    height: \"0\",\n    frameborder: \"0\",\n    src: \"about:blank\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 25\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    onClick: addOrUpdate('add', 0),\n    id: \"add\",\n    className: classes.add,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Tooltip, {\n    title: \"Add Branches\",\n    placement: \"top\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Fab, {\n    \"aria-label\": \"add\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    className: classes.butt,\n    variant: \"contained\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(AddIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 29\n    }\n  }))))), /*#__PURE__*/React.createElement(Tooltip, {\n    title: \"Print list of branches\",\n    placement: \"top\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Fab, {\n    \"aria-label\": \"add\",\n    onClick: () => handleHide(),\n    className: classes.addIcons,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(PrintIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 25\n    }\n  }))), /*#__PURE__*/React.createElement(\"a\", {\n    href: url,\n    download: 'branches.csv',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Tooltip, {\n    title: \"Download list of branches as .csv\",\n    placement: \"top\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Fab, {\n    className: classes.addIcon,\n    \"aria-label\": \"download\",\n    onClick: () => downloadText(rows),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(GetAppIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 23\n    }\n  })))), success.status ? /*#__PURE__*/React.createElement(CustomizedSnackbars, {\n    message: success.message,\n    variant: \"success\",\n    id: \"errorMessage\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 35\n    }\n  }) : \"\", modalShow ? /*#__PURE__*/React.createElement(Modal, {\n    visible: modalShow,\n    width: \"450\",\n    height: \"530\",\n    effect: \"fadeInUp\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.modalMain,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.modalHead,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: classes.modalTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 29\n    }\n  }, modalName + AppConstants.BRANCH), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.modalClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(CloseIcon, {\n    onClick: () => closeModal(false, ''),\n    className: classes.cursor,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 65\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.modal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(BranchModal, {\n    data: modalData,\n    type: modalName,\n    closeModal: closeModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 29\n    }\n  })))) : /*#__PURE__*/React.createElement(React.Fragment, null)) : /*#__PURE__*/React.createElement(CircularProgress, {\n    size: 50,\n    color: \"primary\",\n    className: classes.loadingIcon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 34\n    }\n  })));\n}\n\nexport default withRouter(Branches);","map":{"version":3,"sources":["/home/jumil/Documents/Jumil/Health App/health-app/src/Admin/HealthTeam.jsx"],"names":["React","useState","useEffect","makeStyles","Paper","Table","TableBody","TableCell","TableHead","TableSortLabel","TableRow","createMuiTheme","ThemeProvider","Link","Tooltip","EditIcon","CloseIcon","CircularProgress","withRouter","Cookie","BranchModal","Fab","AddIcon","PrintIcon","IconButton","parseAsync","GetAppIcon","CustomizedSnackbars","Modal","AppConstants","Style","Item","moment","require","token","get","theme","typography","fontSize","Branches","props","rows","setRows","classes","url","setUrl","totalCount","setTotalCount","status","message","order","setOrder","orderField","setOrderField","stageLoading","setStageLoading","modalShow","setModalShow","modalData","setModalData","modalName","setModalName","success","setSuccess","hide","setHide","print","orderBy","setOrderBy","columns","id","label","BRANCH","minWidth","EMPLOYEES_COUNT","align","STATE","CREATED_ON","handleRequestSort","event","property","fetch","BACK_END_URL_DOMAIN","BRANCHES","SORT","method","headers","then","res","json","data","handleHide","createSortHandler","createdOn","createdDate","date","Date","toDateString","time","toLocaleTimeString","momentObj","format","addOrUpdate","type","downloadText","myData","fields","opts","filter","item","created_on","csv","blob","Blob","URL","createObjectURL","catch","err","console","log","closeModal","printMe","window","frames","document","body","innerHTML","getElementsByClassName","root","fetchData","tableWrapper","map","column","index","tableHead","ACTION","ro","rowData","value","tableRowData","branch_name","editIcon","add","butt","addIcons","addIcon","modalMain","modalHead","modalTitle","modalClose","cursor","modal","loadingIcon"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableSortLabel from '@material-ui/core/TableSortLabel';\nimport TableRow from '@material-ui/core/TableRow';\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\nimport {Link} from 'react-router-dom';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport EditIcon from '@material-ui/icons/Edit';\nimport CloseIcon from '@material-ui/icons/Close';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport {withRouter} from 'react-router';\nimport Cookie from \"js-cookie\";\nimport BranchModal from './Modal';\nimport Fab from '@material-ui/core/Fab';\nimport AddIcon from '@material-ui/icons/Add';\nimport PrintIcon from '@material-ui/icons/Print';\nimport IconButton from '@material-ui/core/IconButton'\nimport { parseAsync } from 'json2csv';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport CustomizedSnackbars from './snack';\nimport Modal from 'react-awesome-modal';\nimport AppConstants from '../../Utils/AppConstants';\nimport Style from './Style/HealthTeam';\nimport { Item } from 'semantic-ui-react';\nconst moment = require('moment');\nconst token = Cookie.get('token');\n\nconst theme = createMuiTheme({\n    typography: {\n      fontSize: 25,\n    },\n  });\n\n\nfunction Branches(props) {\n\n  const [rows,setRows]=React.useState([]);\n  const classes = Style();\n  const [url,setUrl]=useState(\"\");\n  const [totalCount,setTotalCount] = useState({status:false,message:''})\n  const [order, setOrder] = useState('asc');\n  const [orderField, setOrderField] = useState('');\n  const [stageLoading, setStageLoading] = useState(true);\n  const [modalShow, setModalShow] = React.useState(false);\n  const [modalData, setModalData] = React.useState({});\n  const [modalName, setModalName] = React.useState('');\n  const[success,setSuccess]=useState({status:false,message:''})\n  const [hide,setHide]=useState({print:false})\n  const [orderBy, setOrderBy] = React.useState('');\n  const columns = [\n            { id: 'branch_name', label: AppConstants.BRANCH, minWidth: 170 },\n            { id: 'emp_count', label: AppConstants.EMPLOYEES_COUNT, align: 'left' },\n            { id: 'state_name', label: AppConstants.STATE, align: 'left' },\n            { id: 'created_on', label: AppConstants.CREATED_ON, align: 'left' },\n  ];\n  \n  const handleRequestSort = async(event, property,id) => {\n      setOrder(order === 'desc' ? 'asc' : 'desc');\n      setOrderField(id);\n      setOrderBy(property.label);\n\n      await fetch(AppConstants.BACK_END_URL_DOMAIN+AppConstants.BRANCHES + '/' + AppConstants.SORT+'/'+id+'/'+order ,{\n        method:'GET',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n        }\n      })\n      .then(res => res.json())\n      .then(data => {\n        setRows(data)\n      });\n  };\n\n  const handleHide=()=>{\n      setHide({print:true})\n    \n  }\n  const createSortHandler = (property,id) => event => {\n    handleRequestSort(event, property,id);\n  };\n\n  const createdOn = (createdDate) => {\n    const date = new Date(createdDate).toDateString();\n    const time = new Date(createdDate).toLocaleTimeString();\n    var momentObj = moment(time,[\"h:mm:ss a\"])\n    return date + ' ' + momentObj.format(\"hh:mm:ss a\");\n  }\n\n  const addOrUpdate = (type,data) => (event) => {\n    setModalData({});\n    if(type === 'edit'){\n        setModalShow(true)\n        setModalData(data);\n        setModalName('Edit ')\n    } else {\n        setModalShow(true)\n        setModalData({});\n        setModalName('Add ')\n    }\n}\n\n  function downloadText(myData){\n      const fields = ['branch_name','emp_count','state_name', 'created_on'];\n      const opts = { fields };\n       myData.filter(item => {\n        item.created_on = moment(item.created_on).format(\"ddd D MMM YYYY, h:mm:ss a\");\n       });\n      parseAsync(myData,opts)\n      .then((csv)=>{\n        var blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });\n        var url = URL.createObjectURL(blob);\n        setUrl(url)\n      })\n      .catch(err=>{console.log(err)})\n    }\n\n  const closeModal = async(status,message) => {\n      setModalShow(false);\n      setSuccess({status:false,message:''})\n      setSuccess({status:status,message:message})\n      if(orderField !== ''){\n        await fetch(AppConstants.BACK_END_URL_DOMAIN+AppConstants.BRANCHES + '/' + AppConstants.SORT+'/'+orderField+'/'+(order === 'asc'?'desc':'asc') ,{\n          method:'GET',\n          headers: {\n            'Authorization': `Bearer ${Cookie.get('token')}`,\n          }\n        })\n        .then(res => res.json())\n        .then(data => {\n          setRows(data)\n        });\n      } else {\n        await fetch(AppConstants.BACK_END_URL_DOMAIN+AppConstants.BRANCHES,{\n          method:'get',\n          headers: {\n            'Authorization': `Bearer ${Cookie.get('token')}`,\n          }\n        }).then(res => res.json())\n        .then(data => {setRows(data);downloadText(data)})\n      }\n  }\n\n  const printMe=()=>{\n    if(hide.print==true){\n        window.frames[\"print_frame\"].document.body.innerHTML = document.getElementsByClassName(classes.root)[0].innerHTML;\n        window.frames[\"print_frame\"].window.print();\n        setHide({print:false})\n    }\n  }\n\n  useEffect(()=>{\n  async function fetchData(){\n    await fetch(AppConstants.BACK_END_URL_DOMAIN+AppConstants.BRANCHES,{\n      method:'get',\n      headers: {\n        'Authorization': `Bearer ${Cookie.get('token')}`,\n      }\n    }).then(res => res.json())\n      .then(async (data) => {\n        setRows(data);downloadText(data);setStageLoading(false);\n      })\n\n  }\n  fetchData()\n  },{})\n  \n  useEffect(() => {\n  return () => {\n    console.log(\"cleaned up\");\n  };\n  }, []);\n  \n  useEffect(()=>{\n    printMe(hide.print)\n    },[hide])\n\n  return (\n      <div>\n          <ThemeProvider theme={theme}>\n          {!stageLoading?\n             <React.Fragment>\n                <Paper className={classes.root} >\n                    <div className={classes.tableWrapper}>\n                        <Table stickyHeader  aria-label=\"sticky table\">\n                            <TableHead  >\n                                <TableRow>\n                                    {columns.map((column,index) => (\n                                        <TableCell\n                                            className={classes.tableHead}\n                                            key={column.id}\n                                            align={column.align}\n                                            style={{ minWidth: column.minWidth }}\n                                            sortDirection={orderBy === column.label ? order : false}\n                                        > \n                                          {column.id == 'branch_name' || column.id =='created_on' || column.id =='state_name' || column.id == 'emp_count'?  \n                                              <TableSortLabel\n                                                  direction={order}\n                                                  onClick={createSortHandler(columns[index],column.id)}\n                                                  hideSortIcon={hide.print}\n                                                  active={orderBy === column.label && !hide.print}\n                                                >\n                                                  {column.label}\n                                              </TableSortLabel> \n                                             :column.label\n                                          }\n                                        </TableCell>\n                                        )\n                                    )}\n                                    {!hide.print?<TableCell  className={classes.tableHead} align='left'>{AppConstants.ACTION}</TableCell>:''}\n                                </TableRow>\n                            </TableHead>\n                            <TableBody>\n                                {\n                                rows.map(ro=> {\n                                return (\n                                    <TableRow hover  tabIndex={-1} className={classes.rowData} >\n                                    {columns.map(column => {\n                                     const value = ro[column.id];\n                                    return (\n                                          column.id=='created_on'?\n                                            <TableCell className={classes.rowData}>\n                                              {createdOn(value)}\n                                            </TableCell>\n                                          :<TableCell key={column.id} align={column.align} className={classes.rowData}>\n                                              {value}\n                                          </TableCell>\n                                    );\n                                    })}\n                                    {!hide.print?\n                                          <TableCell className={classes.tableRowData}>\n                                            <Tooltip title={`Edit branch (`+ro.branch_name+`)`} placement=\"right\">\n                                                <EditIcon  className={classes.editIcon} onClick={addOrUpdate('edit',ro)}/>                                             \n                                            </Tooltip>\n                                          </TableCell>\n                                    :''}\n                                    </TableRow>\n                                );\n                                })}\n                            </TableBody>\n                        </Table>\n                        <iframe name=\"print_frame\" width=\"0\" height=\"0\" frameborder=\"0\" src=\"about:blank\"></iframe>\n                    </div>\n                </Paper>\n\n                <div onClick={addOrUpdate('add',0)} id='add' className={classes.add}>\n                <Tooltip title=\"Add Branches\" placement=\"top\">\n                    <Fab  aria-label=\"add\" >\n                      <IconButton \n                          className={classes.butt}\n                          variant=\"contained\"\n                          >\n                            <AddIcon/>\n                      </IconButton>\n                    </Fab>\n                </Tooltip>\n                </div>\n                <Tooltip title=\"Print list of branches\" placement=\"top\">\n                  <Fab  aria-label=\"add\" onClick={()=>handleHide()} className={classes.addIcons}>\n                        <PrintIcon />\n                  </Fab>\n                  </Tooltip>\n                  <a href={url} download={'branches.csv'}>\n                  <Tooltip title=\"Download list of branches as .csv\" placement=\"top\">\n                    <Fab\n                        className={classes.addIcon}\n                        aria-label=\"download\"\n                        onClick={()=>downloadText(rows)}\n                        >\n                      <GetAppIcon />\n                    </Fab>\n                  </Tooltip>\n                  </a>     \n                  {success.status?<CustomizedSnackbars message={success.message} variant='success' id='errorMessage'/>:\"\"}\n                  {modalShow?(\n                <Modal visible={modalShow}  width=\"450\" height=\"530\" effect=\"fadeInUp\">\n                    <div className={classes.modalMain} >\n                        <div className={classes.modalHead}>\n                            <h3 className={classes.modalTitle}>{modalName + AppConstants.BRANCH}</h3>\n                            <div className={classes.modalClose}><CloseIcon onClick={() => closeModal(false,'')} className={classes.cursor}/></div>\n                        </div>\n                        <div className={classes.modal} >\n                            <BranchModal data={modalData} type={modalName} closeModal={closeModal}/>\n                        </div>\n                    </div>\n                </Modal>\n                ):(<></>)} \n              </React.Fragment>: <CircularProgress size={50} color=\"primary\" className={classes.loadingIcon} />\n              }    \n          </ThemeProvider>\n      </div>\n    );\n}\nexport default withRouter(Branches)"]},"metadata":{},"sourceType":"module"}